<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å³°é—´äº‘æµ·</title>
    <link rel="stylesheet" href="/css/mdui.css">
    <script src="/js/mdui.js"></script>
    <script src="/js/jquery.min.js"></script>

    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
    <script>
        LA.init({
            id: "K7zTzBSVqAfJ71mY",
            ck: "K7zTzBSVqAfJ71mY"
        })
    </script>
</head>

<body class="mdui-theme-primary-blue-grey mdui-theme-accent-blue">
    <div class="mdui-drawer mdui-drawer-close" id="sidebar">
    <div class="mdui-list" mdui-collapse="{accordion: true}">
        <a href="/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">home</i>
            <div class="mdui-list-item-content">é¦–é¡µ</div>
        </a>
        <div class="mdui-collapse-item">
            <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                <i class="mdui-list-item-icon mdui-icon material-icons">map</i>
                <div class="mdui-list-item-content">å«æ˜Ÿåœ°å›¾</div>
                <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
            </div>
            <ul class="mdui-collapse-item-body mdui-list mdui-list-dense">
                <a href="https://mcmap.hzchu.top/">
                    <li class="mdui-list-item mdui-ripple">åœ°å›¾</li>
                </a>
                <a href="https://share.hzchu.top/MC/dynmapæ•°æ®/">
                    <li class="mdui-list-item mdui-ripple">æ•°æ®å­˜æ¡£</li>
                </a>
            </ul>
        </div>
        <a href="/chatlist/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">chat</i>
            <div class="mdui-list-item-content">èŠå¤©è®°å½•</div>
        </a>
        <!-- <a href="/bansearch/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">account_balance</i>
            <div class="mdui-list-item-content">å°é»‘å±‹</div>
        </a> -->
        <a href="/photo/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">photo</i>
            <div class="mdui-list-item-content">ç›¸å†Œ</div>
        </a>
        <!-- <a href="/fakeplayer/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">rowing</i>
            <div class="mdui-list-item-content">å‡äººç®¡ç†</div>
        </a> -->
        <a href="/place/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">place</i>
            <div class="mdui-list-item-content">æœ‰ç”¨ã®åæ ‡</div>
        </a>
        <a href="/list/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">format_list_numbered</i>
            <div class="mdui-list-item-content">æ’è¡Œæ¦œ</div>
        </a>
        <!-- <a href="/achievements/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">events</i>
            <div class="mdui-list-item-content">æˆå°±</div>
        </a> -->
        <a href="https://blog.hzchu.top/wiki/fcloud/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">chrome_reader_mode</i>
            <div class="mdui-list-item-content">æ–‡æ¡£</div>
        </a>
        <div class="mdui-collapse-item">
            <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                <i class="mdui-list-item-icon mdui-icon material-icons">more_horiz</i>
                <div class="mdui-list-item-content">æ›´å¤š</div>
                <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
            </div>
            <ul class="mdui-collapse-item-body mdui-list mdui-list-dense">
                <a href="/admin/">
                    <li class="mdui-list-item mdui-ripple">ç®¡ç†</li>
                </a>
                <a href="/status/">
                    <li class="mdui-list-item mdui-ripple">æœåŠ¡å™¨çŠ¶æ€</li>
                </a>
            </ul>

        </div>
        <a href="https://blog.hzchu.top/wiki/fcloud/about/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">info</i>
            <div class="mdui-list-item-content">å…³äº</div>
        </a>
        <a href="/changelog/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">library_books</i>
            <div class="mdui-list-item-content">æ›´æ–°æ—¥å¿—</div>
        </a>
        <a href="/fb/" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">feedback</i>
            <div class="mdui-list-item-content">åé¦ˆ</div>
        </a>
        <a href="https://jq.qq.com/?_wv=1027&k=erVXhRym" class="mdui-list-item mdui-ripple">
            <i class="mdui-list-item-icon mdui-icon material-icons">group</i>
            <div class="mdui-list-item-content">QQç¾¤å…¥å£</div>
        </a>
    </div>
</div>
        <div class="mdui-appbar">
    <div class="mdui-toolbar mdui-color-teal mdui-appbar-scroll-hide">
        <a href="javascript:;" class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#sidebar'}">
            <i class="mdui-icon material-icons">menu</i>
        </a>
        <a href="https://mcweb.hzchu.top" class="mdui-typo-headline" id="titletext">å³°é—´äº‘æµ·</a>
        <div class="mdui-toolbar-spacer"></div>
        <a href="/" class="mdui-btn mdui-btn-icon">
            <i class="mdui-icon material-icons">home</i>
        </a>
        <a href="javascript:location.reload();" class="mdui-btn mdui-btn-icon">
            <i class="mdui-icon material-icons">refresh</i>
        </a>
    </div>
</div>
            <!-- åˆ°æ­¤ -->
            <div class="mdui-container">
                <div class="mdui-card">
                    <div class="mdui-card-header">
                        <i class="mdui-list-item-icon mdui-icon material-icons">chat</i>
                        <div class="mdui-card-header-title">èŠå¤©æŸ¥è¯¢</div>
                    </div>
                    <div class="mdui-card-content">
                        <div class="mdui-table-fluid">
                            <table class="mdui-table mdui-table-hoverable">
                                <thead>
                                    <tr>
                                        <th>ç©å®¶åç§°</th>
                                        <th>æ¶ˆæ¯</th>
                                        <th>MID</th>
                                        <th>æ—¶é—´</th>
                                    </tr>
                                </thead>
                                <tbody id="table-body">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="mdui-row">
                        <div class="mdui-col-xs-6">
                            <button class="mdui-btn mdui-btn-raised mdui-ripple" id="previous">ä¸Šä¸€é¡µ</button>
                        </div>
                        <div class="mdui-col-xs-6 mdui-text-right">
                            <button class="mdui-btn mdui-btn-raised mdui-ripple" id="next">ä¸‹ä¸€é¡µ</button>
                        </div>
                    </div>
                </div>

            </div>

            <script>
                // è·å–URLä¸­çš„æŸ¥è¯¢å‚æ•°
                const urlParams = new URLSearchParams(window.location.search);

                // æ£€æŸ¥æ˜¯å¦å­˜åœ¨å‚æ•°num
                const num = urlParams.has('num') ? parseInt(urlParams.get('num')) : 0;
                if (num == 0) {
                    document.getElementById('previous').disabled = true;
                }
                const apiurl = 'https://mcweb-api.hzchu.top/user/msg?num=' + num;
                const tableBody = document.getElementById('table-body');

                fetch(apiurl)
                    .then(response => response.json())
                    .then(data => {
                        var count = data.length
                        if (!count) {
                            document.getElementById('next').disabled = true;
                            mdui.snackbar({
                                message: 'çœ‹å®Œäº†ğŸ˜¢'
                            });
                            return
                        }
                        if (count < 40) {
                            document.getElementById('next').disabled = true;
                            mdui.snackbar({
                                message: 'æœ€åä¸€é¡µäº†ğŸ˜¶â€ğŸŒ«ï¸'
                            });
                        }
                        data.forEach((player, index) => {
                            const row = document.createElement('tr');
                            const playerName = document.createElement('td');
                            const msg = document.createElement('td');
                            const mid = document.createElement('td');
                            const msgtime = document.createElement('td');


                            mid.textContent = player.id;
                            msgtime.textContent = player.time;
                            if (player.playername == "thun8") {
                                playerName.textContent = "[ç®¡ç†]thun8";
                            } else {
                                playerName.textContent = player.playername;
                            }
                            msg.textContent = player.msg;
                            row.appendChild(playerName);
                            row.appendChild(msg);
                            row.appendChild(mid);
                            row.appendChild(msgtime);

                            tableBody.appendChild(row);
                        });
                    })
                    .catch(error => {
                        mdui.snackbar({
                            message: 'å‘ç”Ÿé”™è¯¯:' + error
                        });
                        //console.error('å‘ç”Ÿé”™è¯¯:', error);
                    });
                if (num >= 160) {
                    document.getElementById('next').disabled = true;
                    mdui.snackbar({
                        message: '200æ¡åä¸äºˆæŸ¥çœ‹ğŸ˜¶â€ğŸŒ«ï¸'
                    });
                }
                // è·å–ä¸Šä¸€é¡µå’Œä¸‹ä¸€é¡µæŒ‰é’®çš„å¼•ç”¨
                const previousButton = document.getElementById('previous');
                const nextButton = document.getElementById('next');

                // ç›‘å¬ä¸Šä¸€é¡µæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
                previousButton.addEventListener('click', function() {
                    // å‡å»24
                    num_next = num - 40;

                    // å¦‚æœç»“æœå°äº0ï¼Œèµ‹å€¼ä¸º0
                    if (num_next < 0) {
                        num_next = 0;
                    }

                    // æ›´æ–°é¡µé¢å‚æ•°numçš„å€¼
                    updateUrlParameter('num', num_next);

                    // åˆ·æ–°é¡µé¢
                    window.location.reload();
                });

                // ç›‘å¬ä¸‹ä¸€é¡µæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
                nextButton.addEventListener('click', function() {
                    num_next = num + 40;

                    // æ›´æ–°é¡µé¢å‚æ•°numçš„å€¼
                    updateUrlParameter('num', num_next);

                    // åˆ·æ–°é¡µé¢
                    window.location.reload();
                });

                // è·å–URLä¸­æŒ‡å®šå‚æ•°çš„å€¼
                function getParameterByName(name) {
                    const url = window.location.href;
                    name = name.replace(/[\[\]]/g, '\\$&');
                    const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
                    const results = regex.exec(url);
                    if (!results) return null;
                    if (!results[2]) return '';
                    return decodeURIComponent(results[2].replace(/\+/g, ' '));
                }

                // æ›´æ–°URLä¸­æŒ‡å®šå‚æ•°çš„å€¼
                function updateUrlParameter(key, value) {
                    const baseUrl = [location.protocol, '//', location.host, location.pathname].join('');
                    const urlQueryString = document.location.search;
                    const newParam = key + '=' + value;
                    let params = '?' + newParam;

                    // å¦‚æœURLä¸­å·²ç»åŒ…å«æŒ‡å®šå‚æ•°ï¼Œåˆ™æ›¿æ¢å®ƒçš„å€¼
                    if (urlQueryString) {
                        const keyRegex = new RegExp('([?&])' + key + '[^&]*');
                        if (urlQueryString.match(keyRegex) !== null) {
                            params = urlQueryString.replace(keyRegex, '$1' + newParam);
                        } else {
                            params = urlQueryString + '&' + newParam;
                        }
                    }

                    // æ›´æ–°URL
                    window.history.replaceState({}, '', baseUrl + params);
                }
                document.getElementById("titletext").innerHTML = "å³°é—´äº‘æµ·|èŠå¤©è®°å½•";
            </script>
            <style>
                .mdui-card {
                    width: 90%;
                    margin: 30px auto 0 auto;
                    border-radius: 10px;
                }
                
                .mdui-card-header {
                    display: flex;
                    align-items: center;
                }
                
                table {
                    border-radius: 10px;
                }
                
                .mdui-row {
                    padding: 2%;
                }
            </style>
            </div>
            <footer id="footer">
    <span>Made by <a href="https://www.hzchu.top/">Thun888</a>.Version:23/7/17[1]</layout></span>
</footer>
<style>
    body {
        --bg-light: url("/img/backgroud.webp");
        --bg-dark: url("/img/backgroud-dark.webp");
        background-repeat: no-repeat;
        background-size: cover;
        background-attachment: fixed;
    }
    
    @media (prefers-color-scheme: light) {
        body {
            background-image: linear-gradient(rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.4)), var(--bg-light);
        }
    }
    
    @media (prefers-color-scheme: dark) {
        body {
            background-image: linear-gradient(rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2)), var(--bg-dark);
        }
    }
    
    @font-face {
        font-family: Roboto;
        src: url(/fonts/roboto/Roboto-Medium.woff2) format('woff2')
    }
    
    .mdui-card-header-title {
        margin-left: 15px;
    }
    
    #footer {
        text-align: center;
        bottom: 0;
        width: 100%;
        height: 30px;
        background: rgba(97, 104, 90, 0.337);
        line-height: 2;
        z-index: 999;
        margin-top: 40px;
    }
</style>
</body>